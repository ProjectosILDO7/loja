import{_ as I,r as i,U as C,w as P,o as S,L as j,M as A,N as l,f as a,$ as v,Y as e,aO as B,Q as w,aJ as U,aI as Q,R as m,P as u,q as N}from"./index.c57e1df5.js";import{Q as L}from"./QSpace.fae20777.js";import{Q as D,a as E}from"./QTable.c75b471b.js";import{Q as M}from"./QImg.024e7afb.js";import{Q as O}from"./QPage.39b9a795.js";import{Q as R,a as T}from"./QLayout.031ceddd.js";import{f}from"./utils.f797cfcd.js";import{db as q}from"./localbase.0d6b512d.js";import{n as J}from"./notify.09de74ef.js";import"./QMenu.12cb183b.js";import"./format.609662aa.js";import"./rtl.b51694b1.js";import"./use-quasar.ccf7ad9b.js";const Y=[{name:"img_url",required:!0,label:"Dessert (100g serving)",field:r=>r.name,label:"Imagem",sortable:!0,align:"left"},{name:"produto",field:"produto",label:"nome de produto",sortable:!0,align:"left"},{name:"categoria",field:"categoria",label:"Categoria pertencente",sortable:!0,align:"left"},{name:"quantidade",field:"quantidade",label:"Quant.",sortable:!0,align:"left"},{name:"preco",field:"preco",label:"Pre\xE7o unit\xE1rio",sortable:!0,align:"left",format:r=>f(r)},{name:"impostoIVA",field:"impostoIVA",label:"Imposto",sortable:!0,align:"left",format:r=>f(r)},{name:"valorAcrescentado",field:"valorAcrescentado",label:"Pre\xE7o total",sortable:!0,align:"left",format:r=>f(r)},{name:"options",field:"options",label:"Op\xE7\xF5es",align:"left"}],z={name:"pageVendas",setup(){const r=i([]),n=i([]),d=i(!1),o="produtos",p=i(""),g=i(0),{notifySuccess:t,notifyError:_,notifyinfo:V}=J(),x=C(),b=i({find:""});P(b.value,s=>{p.value=s.find.categoria}),S(()=>{y(),h(),g.value=14/100});const k=s=>{s.quantidade>0?x.push({name:"addVendas",params:{key:s.key}}):V("Este produto j\xE1 n\xE3o tem no Stock, Precisas adquerir!")},y=async()=>{try{d.value=!0;const s=await q.collection(o).get({keys:!0});r.value=s.map(c=>({...c.data,key:c.key}))}catch(s){_(s.message)}finally{d.value=!1}},h=async()=>{try{d.value=!0;const s=await q.collection("categorias").get({keys:!0});n.value=s.map(c=>({...c.data,key:c.key}))}catch(s){_(s.message)}finally{d.value=!1}};return{columns:Y,carregarInfo:y,filter:p,rows:r,categorias:n,carregarInfoCateg:h,form:b,formatCurrency:f,addVenda:k,valIva:g}}},F=e("p",{class:"text-body1"},"Loja - Produtos em Stock",-1),G={class:"q-pa-md"},H={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},K=e("br",null,null,-1),W={class:"row justify-left q-mt-sm"},X={class:"q-ml-sm"},Z={class:"text-green-10"},$={class:"row justify-left q-mt-sm"},ee={class:"q-ml-sm"},ae={class:"text-green-10"},oe={class:"row justify-left q-mt-sm"},te={class:"q-ml-sm"},se={class:"text-green-10"},re={class:"row justify-left q-mt-sm"},le={class:"q-ml-sm"};function ne(r,n,d,o,p,g){return j(),A(R,null,{default:l(()=>[a(T,null,{default:l(()=>[a(O,{padding:""},{default:l(()=>[F,a(v),e("div",G,[a(D,{flat:"",bordered:"",grid:"",rows:o.rows,columns:o.columns,"row-key":"name",filter:o.filter,"hide-header":"","rows-per-page-label":"3","rows-per-page-options":"3"},{top:l(()=>[a(B,{borderless:"",outlined:"",dense:"",debounce:"300",modelValue:o.filter,"onUpdate:modelValue":n[0]||(n[0]=t=>o.filter=t),placeholder:"Buscar produto"},{append:l(()=>[a(w,{name:"search"})]),_:1},8,["modelValue"]),a(L),a(E,{dense:"",outlined:"",modelValue:o.form.find,"onUpdate:modelValue":n[1]||(n[1]=t=>o.form.find=t),options:o.categorias,label:"Busque por categoria","option-value":"id","option-label":"categoria","map-options":"","emit-value":"",class:"q-mt-sm col-12",style:{"max-width":"250px"}},{prepend:l(()=>[a(w,{name:"mdi-shape-plus"})]),_:1},8,["modelValue","options"])]),item:l(t=>[e("div",H,[a(U,{flat:"",bordered:""},{default:l(()=>[a(Q,{class:"text-center"},{default:l(()=>[a(M,{src:t.row.imageUrl.imageUrl,style:{width:"300px",height:"200px","object-fit":"cover"}},null,8,["src"]),K,e("strong",null,m(t.row.produto),1)]),_:2},1024),a(v),e("div",W,[e("span",X,[u(" Pre\xE7o Unit: "),e("span",Z,[e("b",null,m(o.formatCurrency(t.row.preco)),1)])])]),e("div",$,[e("span",ee,[u(" Valor do Imposto: "),e("span",ae,[e("b",null,m(o.formatCurrency(t.row.impostoIVA)),1)])])]),e("div",oe,[e("span",te,[u(" Pre\xE7o total "),e("span",se,[e("b",null,m(o.formatCurrency(t.row.impostoIVA+parseInt(t.row.preco))),1)])])]),e("div",re,[e("span",le,[e("span",null,[u("Quantidade em Stock: "),e("b",null,m(t.row.quantidade),1)])])]),a(Q,{class:"q-mt-sm text-right"},{default:l(()=>[a(N,{outline:"",flat:"",color:"green-8",dense:"",icon:"mdi-cart-plus","no-caps":"",onClick:_=>o.addVenda(t.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:1},8,["rows","columns","filter"])])]),_:1})]),_:1})]),_:1})}var we=I(z,[["render",ne]]);export{we as default};
