import{_ as k,d as _,r as b,o as h,L as r,M as u,N as t,f as n,$ as w,X as m,q as d,Y as l}from"./index.c57e1df5.js";import{Q as f}from"./QTd.545bfc1a.js";import{Q as v}from"./QTable.c75b471b.js";import{Q}from"./QPage.39b9a795.js";import{Q as C,a as F}from"./QLayout.031ceddd.js";import{db as c}from"./localbase.0d6b512d.js";import{u as $}from"./use-quasar.ccf7ad9b.js";import"./QMenu.12cb183b.js";import"./format.609662aa.js";import"./rtl.b51694b1.js";const B=[{name:"name",field:"name",label:"Nome completo",sortable:!0,align:"left"},{name:"email",field:"email",label:"Email",sortable:!0,align:"left"},{name:"status",field:"status",label:"Status",sortable:!0,align:"left"},{name:"acesso",field:"acesso",label:"\xC1rea de acesso",sortable:!0,align:"left"},{name:"options",field:"options",label:"Op\xE7\xF5es",sortable:!0,align:"left"}],q=_({setup(){const a=b([]),i=$();h(()=>{s()});const s=async()=>{try{i.loading.show();const e=await c.collection("users").get({keys:!0});a.value=e.map(o=>({...o.data,key:o.key}))}catch(e){console.log(e.message)}finally{i.loading.hide()}};return{columns:B,users:a,carregarUsers:s,activarFuncionario:async e=>{try{await c.collection("users").doc(e).update({status:1}),s()}catch{console.log(erros.message)}},inactivarFuncionario:async e=>{try{await c.collection("users").doc(e).update({status:0}),s()}catch{console.log(erros.message)}},deleteFuncionario:e=>{try{i.dialog({title:"Confirme",message:"Tens a certeza que pretendes apagar este funcionario ?",cancel:!0,persistent:!0}).onOk(async()=>{await c.collection("users").doc(e).delete(),s()}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})}catch(o){console.log(o.message)}finally{s()}}}}}),z=l("div",{class:"row"},[l("span",{class:"text-body1"},[l("b",null,"Lista de todos os funcion\xE1rios")])],-1),N={key:0,class:"text-green-10"},L=l("b",null,"Activo",-1),O=[L],T={key:1,class:"text-red-10"},x=l("b",null,"Inativo",-1),D=[x];function E(a,i,s,p,g,y){return r(),u(C,null,{default:t(()=>[n(F,null,{default:t(()=>[n(Q,{padding:""},{default:t(()=>[z,n(w),n(v,{dense:"",flat:"",rows:a.users,columns:a.columns,"row-key":"name"},{"body-cell-status":t(e=>[n(f,{props:e},{default:t(()=>[e.row.status==1?(r(),m("span",N,O)):(r(),m("span",T,D))]),_:2},1032,["props"])]),"body-cell-options":t(e=>[n(f,{props:e},{default:t(()=>[n(d,{flat:"",dense:"",size:"sm",icon:"mdi-delete",color:"red-10",onClick:o=>a.deleteFuncionario(e.row.key)},null,8,["onClick"]),e.row.status==1?(r(),u(d,{key:0,flat:"",dense:"",size:"sm",icon:"mdi-lock",color:"green-grey-5",onClick:o=>a.inactivarFuncionario(e.row.key),title:"Bloquear"},null,8,["onClick"])):(r(),u(d,{key:1,flat:"",dense:"",size:"sm",icon:"mdi-lock-off",color:"blue-grey-5",onClick:o=>a.activarFuncionario(e.row.key),title:"Desbloaquear"},null,8,["onClick"]))]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1})]),_:1})}var G=k(q,[["render",E]]);export{G as default};
